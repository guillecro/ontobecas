<!doctype html>
<html class="no-js" lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Ontobecas - Becados</title>
        <link rel="stylesheet" href="../public/assets/css/app.css" />
        <script src="../bower_components/modernizr/modernizr.js"></script>
    </head>
    <body>

        <div class="row">
            <div class="small-9 small-centered columns">&nbsp;</div>
        </div>
        <div class="row">
            <div class="small-9 small-centered columns panel callout radius">
                <h5>Listado de becados</h5>
                <table width="100%">
                    <thead><tr>
                        <th>LU</th>
                        <th>Nombre</th>
                        <th>PTD</th>
                        <th>PDA</th>
                        <th>PIF</th>
                        <th>PCL</th>
                        <th>PP</th>
                        <th>PRA</th>
                        <th>PCS</th>
                        <th>PSV</th>
                        <th>Total</th>
                    </tr></thead>
                    <tbody>
                        <tr>
                            <td>20001</td>
                            <td>Pablito</td>
                            <td>5</td>
                            <th>4</th>
                            <td>5</td>
                            <th>4</th>
                            <td>5</td>
                            <th>4</th>
                            <td>5</td>
                            <th>4</th>
                            <td>30</td>
                        </tr>
                        <tr>
                            <td>20002</td>
                            <td>Lala</td>
                            <td>5</td>
                            <th>4</th>
                            <td>5</td>
                            <th>4</th>
                            <td>5</td>
                            <th>4</th>
                            <td>5</td>
                            <th>4</th>
                            <td>30</td>
                        </tr>
                    </tbody>
                </table>
                <h5>Alumnos no becados</h5>
                <table width="100%">
                    <thead><tr>
                        <th>LU</th>
                        <th>Nombre</th>
                        <th>Situaci√≥n</th>
                        <th>Puntaje</th>
                    </tr></thead>
                    <tbody>
                        <tr>
                            <td>20003</td>
                            <td>Juanito</td>
                            <td>Rechazado</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>20004</td>
                            <td>Lola</td>
                            <td>Bajo puntaje</td>
                            <td>12</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="row">
            <div class="small-9 small-centered columns"><a href="base.html" class="button expand">Volver</a></div>
        </div>

        <script src="../public/assets/js/lodash.js"></script>
        <script src="../public/assets/js/stardog.js"></script>
        <script src="../public/assets/js/jquery.min.js"></script>
        <script src="../public/assets/js/foundation.min.js"></script>
        <script src="../public/assets/js/app.js"></script>

        <script type="text/javascript">
            $(document).ready(function() {
                enviarConsulta();
            });

            function enviarConsulta() {
                /* Cantidad materias aprobadas
                var querySPARQL = "SELECT ?lu ?nombre (COUNT(DISTINCT(?materia)) AS ?cantidadMaterias)" +
                    "WHERE { {?x a onto:Alumno} {?x onto:NombreCompleto ?nombre} {?x onto:LU ?lu}" +
                    "{?materia a onto:Materia} {?x onto:TieneAprobada ?materia} }" +
                    "GROUP BY ?lu ?nombre";
                */

                /* Cantidad materias aprobadas ciclo anterior
                var subQuery = "SELECT ?anio " +
                    "WHERE { {?x a onto:CicloLectivoActual} {?x onto:AnioLectivo ?anio} }";

                var querySPARQL = "SELECT ?lu ?nombre (COUNT(DISTINCT(?materia)) AS ?cantidadMaterias)" +
                    "WHERE { {?x a onto:Alumno} {?x onto:NombreCompleto ?nombre} {?x onto:LU ?lu}" +
                    "{?materia a onto:Materia} {?x onto:TieneAprobada ?materia} }" +
                    "{?examen a onto:Examen} {?x onto:Rindio ?examen} {?examen onto:ReferidoA ?materia}" +
                    "{?examen onto:FechaRendida "+ (valorDeSubQuery-1) +"} }" +
                    "GROUP BY ?lu ?nombre";
                */


                /* Cantidad materias regularizadas
                var querySPARQL = "SELECT ?lu ?nombre (COUNT(DISTINCT(?materia)) AS ?cantidadMaterias)" +
                    "WHERE { {?x a onto:Alumno} {?x onto:NombreCompleto ?nombre} {?x onto:LU ?lu}" +
                    "{?materia a onto:Materia} {?x onto:TieneRegularizada ?materia} }" +
                    "GROUP BY ?lu ?nombre";
                */

                /* Promedios
                var querySPARQL = "SELECT ?lu ?nombre (AVG(?nota) AS ?promedio)" +
                    "WHERE { {?x a onto:Alumno} {?x onto:NombreCompleto ?nombre} {?x onto:LU ?lu}" +
                    "{?examen a onto:Examen} {?x onto:Rindio ?examen} {?examen onto:Calificacion ?nota} }" +
                    "GROUP BY ?lu ?nombre";
                */
                ejecutarQuery(querySPARQL, obtenerDatos);
            }

            function obtenerDatos(datos) {
                var datosHeader = datos.head.vars;
                var resultado = datos.results.bindings;
            }
        </script>
    </body>
</html>
